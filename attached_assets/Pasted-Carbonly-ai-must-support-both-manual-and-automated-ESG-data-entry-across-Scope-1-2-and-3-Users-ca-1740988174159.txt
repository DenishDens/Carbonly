Carbonly.ai must support both manual and automated ESG data entry across Scope 1, 2, and 3. Users can manually enter transactions or auto-fetch data from Xero, SharePoint, OneDrive, and Google Drive. Background processing extracts, classifies, and stores ESG data in the appropriate categories (Fuel, Electricity, Water, Travel, Waste, Procurement). Users should be able to filter transactions by type (Manual, Auto Fetch, API Sync), track their source, and edit entries before finalizing reports. SSO (OAuth + SAML) must be included for seamless authentication.

üõ† Prompt for AI Agent
"Integrate a complete ESG data entry system in Carbonly.ai that allows users to manually input transactions while also supporting auto-import from Xero, SharePoint, OneDrive, and Google Drive. Users should be able to filter data by source type (Manual, Auto Fetch, API Sync), view real-time extraction progress, and edit data before import. Background processing should categorize transactions into Scope 1, 2, and 3 and apply pre-configured emission factors. Implement Single Sign-On (SSO) using OAuth (Google, Microsoft) and SAML for enterprise authentication."

üîπ Manual Data Entry for ESG Transactions
‚úÖ User Flow for Manual Entry
1Ô∏è‚É£ User selects an ESG category (Fuel, Electricity, Water, Travel, etc.)
2Ô∏è‚É£ Inputs transaction details (Date, Quantity, Source, Emission Factor, etc.)
3Ô∏è‚É£ AI applies Emission Factor & JV allocation (if applicable)
4Ô∏è‚É£ User saves entry ‚Üí Data is stored & available in reports

‚úÖ Manual Entry Fields (All Categories)

Field	Type	Description
transaction_id	UUID	Primary Key
category	Enum	(Fuel, Electricity, Water, Waste, Travel, etc.)
source_type	Enum	(Manual, Auto Fetch, API Sync)
date	DateTime	Transaction Date
source	String	Emission Source (Diesel, Grid Electricity, etc.)
quantity	Float	Emission Quantity
unit	String	(Liters, kWh, Tons, etc.)
emission_factor	Float	Factor Applied from Settings
total_emissions	Float	Calculated CO‚ÇÇe
jv_allocation	JSON	{ "Company A": 50%, "Company B": 50% }
final_emissions	JSON	{ "Company A": 5000 CO‚ÇÇe, "Company B": 5000 CO‚ÇÇe }
‚úÖ Manual Entry UI Features

‚úÖ Inline Editing: Users can modify transaction data
‚úÖ Auto-Suggestions: AI predicts Emission Factors
‚úÖ Bulk Data Entry: Add multiple transactions at once
üîπ Automated ESG Data Import
‚úÖ User Flow for Auto-Fetch
1Ô∏è‚É£ User connects Xero, SharePoint, OneDrive, or Google Drive
2Ô∏è‚É£ User selects a folder ‚Üí AI scans files in the background
3Ô∏è‚É£ AI extracts relevant ESG data (fuel, electricity, travel, etc.)
4Ô∏è‚É£ Data is auto-classified & mapped to the right category
5Ô∏è‚É£ Transactions are stored with source tracking (Manual, Auto Fetch, API Sync)

‚úÖ API Endpoints for File Fetching

POST /api/integrations/connect ‚Üí Authenticate & connect to a service
GET /api/integrations/folders ‚Üí Fetch available folders
POST /api/integrations/select-folder ‚Üí Set folder for auto-processing
GET /api/integrations/status ‚Üí Background processing progress
GET /api/integrations/transactions ‚Üí Fetch imported ESG transactions with source details
‚úÖ Transaction Source Tracking (Stored with Each Record)

Field	Type	Description
source_type	Enum	(Manual Entry, Auto Fetch, API Sync)
file_name	String	If auto-imported, shows file name
folder_path	String	Folder where file was stored
date_imported	DateTime	Timestamp of data extraction
status	Enum	(Pending, Imported, Error)
‚úÖ Filters for Users to View Imported Data

Source Type: Manual Entry / Auto Fetch / API Sync
Date Range: Filter ESG data imports over time
Transaction Type: Fuel, Electricity, Water, Travel, Freight, Waste, etc.
üîπ SSO Implementation (Google, Microsoft, SAML)
‚úÖ OAuth2-Based SSO for:

Google Login
Microsoft (Azure AD, Office 365)
Enterprise SAML Support
‚úÖ SSO API Endpoints

GET /api/auth/login ‚Üí Redirect to SSO provider
GET /api/auth/callback ‚Üí Process authentication response
POST /api/auth/token ‚Üí Exchange OAuth token for session
GET /api/auth/user ‚Üí Retrieve authenticated user profile
‚úÖ User Roles & Permissions

Role	Access Level
Admin	Full control over ESG data & integrations
Manager	Can view and edit ESG data, approve imports
Auditor	Read-only access to reports & compliance logs
üîπ UI Enhancements (Replit-Friendly)
‚úÖ New Pages in UI

Page	Functionality
Integrations Page	Connect Xero, SharePoint, OneDrive, Google Drive
Import Dashboard	Show all imported ESG data (with source details)
Fuel Data Page	Filter & display fuel-related transactions
Electricity Data Page	Show electricity transactions
Travel & Transport Page	Show all Scope 3 travel emissions
Waste & Procurement Page	Show Scope 3 waste & procurement emissions
Manual Entry Page	Allow users to manually input ESG data
Incident Reporting Page	Track environmental incidents
SSO Login Page	Allow Google/Microsoft authentication
‚úÖ Navigation Fixes (UI Menu Cleanup)

Move ESG data under "Transactions"
Add "Integrations" as a separate menu
Keep "SSO Login" under Settings
Add "Manual Entry" page for direct input transactions
üéØ Expected Output from AI Agent
1Ô∏è‚É£ Full ESG data entry support (Manual + Auto Fetch) with proper transaction tracking
2Ô∏è‚É£ Fully integrated file import system (Xero, SharePoint, OneDrive, Google Drive)
3Ô∏è‚É£ Background processing for ESG data extraction & auto-categorization
4Ô∏è‚É£ Transaction records with source tracking (Manual, Auto, API Sync)
5Ô∏è‚É£ SSO authentication with Google, Microsoft, and Enterprise SAML
6Ô∏è‚É£ New UI pages for filtering, displaying, and manually inputting ESG data